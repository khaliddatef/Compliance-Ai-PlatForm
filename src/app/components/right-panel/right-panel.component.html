<div class="panel" [class.open]="open">
  <div class="panel-header">
    <div>
      <p class="eyebrow">Compliance summary</p>
      <h3>Workspace snapshot</h3>
    </div>
    <button class="icon-button" type="button" (click)="close.emit()" aria-label="Close panel">✕</button>
  </div>

  <div class="card status-card" [class.loading]="loading" [class]="statusTone">
    <p class="label">Result</p>
    <h4>{{ loading ? 'Checking…' : result?.status || 'Pending' }}</h4>
    <p class="summary">{{ result?.summary || 'No assessment yet.' }}</p>
  </div>

  <div class="card">
    <div class="card-header">
      <span>Missing requirements</span>
      <span class="counter">{{ result?.missing?.length || 0 }}</span>
    </div>
    <ul class="list">
      <li *ngFor="let item of result?.missing || ['Add policy references', 'Map controls to FRA']">
        <span class="marker"></span>
        <span>{{ item }}</span>
      </li>
    </ul>
  </div>

  <div class="card">
    <div class="card-header">
      <span>Sources & citations</span>
      <span class="counter">{{ result?.sources?.length || 0 }}</span>
    </div>
    <div class="sources">
      <span *ngFor="let source of result?.sources || ['AuditNotes p.5', 'PolicyHub p.12']" class="tag">
        {{ source }}
      </span>
    </div>
  </div>
</div>
